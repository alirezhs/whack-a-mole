(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))g(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const w of l.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&g(w)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function g(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();const M={easy:{gameTime:30,initialSpeed:1e3,fastSpeed:800,speedChangeTime:15,pointsPerHit:1,timeBonus:!1},medium:{gameTime:45,initialSpeed:700,fastSpeed:500,speedChangeTime:25,pointsPerHit:2,timeBonus:!0},hard:{gameTime:60,initialSpeed:500,fastSpeed:300,speedChangeTime:40,pointsPerHit:3,timeBonus:!0}};let b=-1;function U(e,t="easy",r=0){const g=M[t];let i=g.pointsPerHit;return g.timeBonus&&r<10&&(i+=1),e+i}function $(e,t=!0){let r;if(t&&b!==-1)do r=Math.floor(Math.random()*e);while(r===b);else r=Math.floor(Math.random()*e);return b=r,r}function z(){b=-1}function B(e="easy"){return M[e].gameTime}function _(e,t="easy"){const r=M[t];return e>=r.speedChangeTime?r.initialSpeed:r.fastSpeed}function F(e,t="easy"){return e===M[t].speedChangeTime}function j(e){return["easy","medium","hard"].includes(e)}console.log("Script started");let O="";function E(e){console.log(e),O+=e+`
`}function K(){const e=new Blob([O],{type:"text/plain"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="whackamole_log.txt",t.click()}let s,I,h,y,S,c,n,u,H,a,v;function V(){return E("initializeDOM called"),s=document.querySelectorAll(".square"),I=document.querySelector("#time-left"),h=document.querySelector("#score"),y=document.querySelector("#high-score"),S=document.querySelector("#final-score"),c=document.querySelector("#start-button"),n=document.querySelector("#pause-button"),u=document.querySelector("#restart-button"),H=document.querySelector("#reset-highscore-button"),a=document.querySelector("#high-score-message"),v=document.querySelectorAll(".difficulty-btn"),!I||!s||s.length===0||!c||!h||v.length===0?(E("Error: some DOM elements missing"),!1):(E("DOM initialized successfully"),!0)}let P=new Audio("audio/whack01.mp3"),f=0,T=null,d=30,C=null,L=null,m=!1,p=!1,o=localStorage.getItem("whackAMoleCurrentDifficulty");j(o)||(o="easy",localStorage.setItem("whackAMoleCurrentDifficulty",o));d=B(o)||30;function x(){I&&(I.textContent=d)}function k(){v&&v.forEach(e=>{e.classList.toggle("active",e.dataset.level===o)})}function A(e=o){return parseInt(localStorage.getItem(`whackAMoleHighScore_${e}`))||0}function R(e,t=o){localStorage.setItem(`whackAMoleHighScore_${t}`,e),t===o&&y&&(y.textContent=e)}function G(){y&&(y.textContent=A())}function Y(){const e=A();f>e&&(R(f),a&&(a.textContent="ðŸŽ‰ New High Score! ðŸŽ‰",a.style.display="block",setTimeout(()=>a.style.display="none",3e3)))}function J(){confirm(`Reset ${o.toUpperCase()} High Score?`)&&(R(0),a&&(a.textContent="High Score Reset!",a.style.display="block",setTimeout(()=>a.style.display="none",2e3)))}function D(e=!1){clearInterval(C),clearInterval(L),f=0,h&&(h.textContent=f),S&&(S.textContent=""),s&&s.forEach(t=>t.classList.remove("mole")),z(),p=!1,m=!1,c&&(c.disabled=!1),n&&(n.disabled=!0,n.textContent="Pause"),u&&(u.disabled=!0),e||(d=B(o)),x(),G()}function Q(){m||(D(!0),m=!0,c&&(c.disabled=!0),n&&(n.disabled=!1),u&&(u.disabled=!1),q(),L=setInterval(N,1e3))}function W(){m&&(p?(q(),L=setInterval(N,1e3),n&&(n.textContent="Pause"),p=!1):(clearInterval(C),clearInterval(L),n&&(n.textContent="Resume"),p=!0))}function X(){s.forEach(t=>t.classList.remove("mole"));const e=$(9,!0);s[e]&&(s[e].classList.add("mole"),T=s[e].id)}function q(){clearInterval(C);const e=_(d,o);C=setInterval(X,e)}function N(){d--,x(),F(d,o)&&q(),d<=0&&(clearInterval(C),clearInterval(L),S&&(S.textContent=`Your final score: ${f}`),Y(),s&&s.forEach(e=>e.classList.remove("mole")),m=!1,c&&(c.disabled=!0),n&&(n.disabled=!0),u&&(u.disabled=!1),K())}function Z(){s.forEach(e=>{e.addEventListener("mousedown",()=>{e.id===T&&m&&!p&&(f=U(f,o,d),h&&(h.textContent=f),T=null,P.currentTime=0,P.play().catch(()=>{}))})})}function ee(e){o=e,localStorage.setItem("whackAMoleCurrentDifficulty",e),k(),D()}function te(){c&&c.addEventListener("click",Q),n&&n.addEventListener("click",W),u&&u.addEventListener("click",()=>D()),H&&H.addEventListener("click",J),v.forEach(e=>{e.addEventListener("click",()=>{m||ee(e.dataset.level)})}),Z()}document.addEventListener("DOMContentLoaded",()=>{V()&&(k(),x(),G(),te())});
